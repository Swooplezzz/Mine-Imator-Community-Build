/*
	NOTE:
	This file was autogenerated by CppGen, changes may be overwritten and forever lost!
	Modify at your own risk!
	
	[ Generated on 2024.01.25 01:36:45 ]
*/

#include "Scripts.hpp"

namespace CppProject
{
	RealType settings_load_legacy(ScopeAny self, StringType fn)
	{
		log({ /*"Loading legacy settings"*/ STR(2800), fn });
		global::buffer_current = buffer_load_lib(fn);
		global::load_format = buffer_read_byte();
		log({ /*"load_format"*/ STR(1273), global::load_format });
		if (global::load_format >= e_settings_FORMAT_110_PRE_1)
		{
			buffer_delete(global::buffer_current);
			return IntType(0);
		}
		if (global::load_format >= e_settings_FORMAT_100)
		{
			gmlGlobal::room_speed = buffer_read_byte();
			if (dev_mode)
				buffer_read_string_int();
			else
				sStr(setting_project_folder) = buffer_read_string_int();
			
		}
		sVar(setting_backup) = buffer_read_byte();
		sReal(setting_backup_time) = buffer_read_byte();
		sReal(setting_backup_amount) = buffer_read_byte();
		if (global::load_format < e_settings_FORMAT_100)
			buffer_read_byte();
		if (global::load_format >= e_settings_FORMAT_100_DEMO_5)
		{
			buffer_read_byte();
			sVar(setting_spawn_cameras) = buffer_read_byte();
		}
		buffer_read_byte();
		buffer_read_double();
		if (global::load_format >= e_settings_FORMAT_100)
		{
			buffer_read_byte();
			buffer_read_byte();
		}
		if (global::load_format >= e_settings_FORMAT_103)
		{
			buffer_read_byte();
			buffer_read_int();
		}
		buffer_read_string_int();
		buffer_read_string_int();
		if (global::load_format < e_settings_FORMAT_100)
		{
			buffer_read_int();
			buffer_read_int();
			buffer_read_int();
			buffer_read_int();
			buffer_read_int();
			buffer_read_int();
			buffer_read_int();
			buffer_read_int();
			buffer_read_int();
			buffer_read_int();
		}
		else
			settings_load_legacy_colors();
		
		sVar(setting_timeline_autoscroll) = buffer_read_byte();
		if (global::load_format >= e_settings_FORMAT_103)
		{
			sReal(setting_timeline_compact) = buffer_read_byte();
			sVar(setting_timeline_select_jump) = buffer_read_byte();
		}
		if (global::load_format >= e_settings_FORMAT_100)
			sReal(setting_z_is_up) = buffer_read_byte();
		IntType keynew = buffer_read_byte();
		buffer_read_byte();
		IntType keyimportasset = null_;
		IntType keyimportassetcontrol = null_;
		if (global::load_format >= e_settings_FORMAT_100)
		{
			keyimportasset = buffer_read_byte();
			keyimportassetcontrol = buffer_read_byte();
		}
		IntType keyopen = buffer_read_byte();
		buffer_read_byte();
		IntType keysave = buffer_read_byte();
		buffer_read_byte();
		if (keynew == IntType(0) || keyimportasset == IntType(0) || keyopen == IntType(0) || keysave == IntType(0))
		{
			buffer_delete(global::buffer_current);
			return IntType(0);
		}
		if (global::load_format >= e_settings_FORMAT_100)
		{
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
		}
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		if (global::load_format < e_settings_FORMAT_100)
		{
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
			buffer_read_byte();
		}
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		buffer_read_byte();
		sReal(setting_move_speed) = buffer_read_double();
		sReal(setting_look_sensitivity) = buffer_read_double();
		sReal(setting_fast_modifier) = buffer_read_double();
		sReal(setting_slow_modifier) = buffer_read_double();
		buffer_read_byte();
		buffer_read_int();
		buffer_read_double();
		sVar(setting_scenery_remove_edges) = buffer_read_byte();
		if (global::load_format >= e_settings_FORMAT_106)
			sVar(project_render_liquid_animation) = buffer_read_byte();
		if (global::load_format >= e_settings_FORMAT_100)
		{
			sVar(project_render_texture_filtering) = buffer_read_byte();
			buffer_read_byte();
			if (global::load_format >= e_settings_FORMAT_106_2)
				sVar(project_render_block_emissive) = buffer_read_double();
			if (global::load_format < e_settings_FORMAT_106_3)
				buffer_read_int();
			sVar(project_render_ssao) = buffer_read_byte();
			sVar(project_render_ssao_radius) = buffer_read_double();
			sVar(project_render_ssao_power) = buffer_read_double();
			buffer_read_byte();
			sVar(project_render_ssao_color) = buffer_read_int();
			sVar(project_render_shadows) = buffer_read_byte();
		}
		sVar(project_render_shadows_sun_buffer_size) = buffer_read_int();
		sVar(project_render_shadows_spot_buffer_size) = buffer_read_int();
		sVar(project_render_shadows_point_buffer_size) = buffer_read_int();
		if (global::load_format >= e_settings_FORMAT_100)
		{
			buffer_read_byte();
			buffer_read_double();
			buffer_read_byte();
			buffer_read_double();
			sVar(project_render_aa) = buffer_read_byte();
			sVar(project_render_aa_power) = buffer_read_double() == buffer_read_byte();
			buffer_read_string_int();
			buffer_read_double();
			sVar(setting_panel_left_bottom_size) = buffer_read_double();
			sVar(setting_panel_right_bottom_size) = buffer_read_double();
			sVar(setting_panel_bottom_bottom_size) = buffer_read_double();
			sVar(setting_panel_top_size) = buffer_read_double();
			sVar(setting_panel_left_top_size) = buffer_read_double();
			sVar(setting_panel_right_top_size) = buffer_read_double();
			ArrType locarr = ArrType::From({ /*"left_secondary"*/ STR(199), /*"right_secondary"*/ STR(200), /*"bottom"*/ STR(201), /*"top"*/ STR(202), /*"left"*/ STR(203), /*"right"*/ STR(204) });
			sVar(setting_properties_location) = locarr.Value(buffer_read_byte());
			sVar(setting_ground_editor_location) = locarr.Value(buffer_read_byte());
			sVar(setting_template_editor_location) = locarr.Value(buffer_read_byte());
			locarr.Value(buffer_read_byte());
			sVar(setting_timeline_editor_location) = locarr.Value(buffer_read_byte());
			sVar(setting_frame_editor_location) = locarr.Value(buffer_read_byte());
			sVar(setting_settings_location) = locarr.Value(buffer_read_byte());
			sVar(setting_view_split) = buffer_read_double();
			sVar(setting_view_main_overlays) = buffer_read_byte() == buffer_read_byte();
			sVar(setting_view_main_particles) = buffer_read_byte();
			sVar(setting_view_main_grid) = buffer_read_byte();
			sVar(setting_view_main_aspect_ratio) = buffer_read_byte();
			sVar(setting_view_main_location) = buffer_read_string_int();
			sVar(setting_view_second_show) = buffer_read_byte();
			sVar(setting_view_second_overlays) = buffer_read_byte() == buffer_read_byte();
			sVar(setting_view_second_particles) = buffer_read_byte();
			sVar(setting_view_second_grid) = buffer_read_byte();
			sVar(setting_view_second_aspect_ratio) = buffer_read_byte();
			sVar(setting_view_second_location) = buffer_read_string_int();
			sVar(setting_view_second_width) = buffer_read_double();
			sVar(setting_view_second_height) = buffer_read_double() == buffer_read_byte();
		}
		else
		{
			buffer_read_int();
			sVar(project_render_shadows_blur_quality) = buffer_read_byte();
			sVar(project_render_shadows_blur_size) = min({ buffer_read_double(), IntType(4) });
			buffer_read_double();
		}
		
		if (global::load_format >= e_settings_FORMAT_106)
		{
			sVar(setting_export_movie_format) = buffer_read_string_int();
			sVar(setting_export_movie_frame_rate) = buffer_read_byte();
			sVar(setting_export_movie_bit_rate) = buffer_read_int();
			sVar(setting_export_movie_include_audio) = buffer_read_byte();
			sVar(setting_export_movie_remove_background) = buffer_read_byte();
			sVar(setting_export_movie_include_hidden) = buffer_read_byte();
			sVar(setting_export_movie_high_quality) = buffer_read_byte();
			sVar(setting_export_image_remove_background) = buffer_read_byte();
			sVar(setting_export_image_include_hidden) = buffer_read_byte();
			sVar(setting_export_image_high_quality) = buffer_read_byte();
		}
		if (global::load_format >= e_settings_FORMAT_CB_102)
		{
			buffer_read_byte();
			buffer_read_byte();
		}
		buffer_delete(global::buffer_current);
		return 0.0;
	}
	
	void settings_load_legacy_colors()
	{
		buffer_read_int();
		buffer_read_int();
		buffer_read_int();
		buffer_read_int();
		buffer_read_int();
		buffer_read_int();
		buffer_read_int();
		buffer_read_int();
		buffer_read_int();
		buffer_read_int();
		buffer_read_int();
		buffer_read_int();
		buffer_read_int();
		buffer_read_int();
		buffer_read_int();
		buffer_read_int();
		buffer_read_int();
		buffer_read_int();
		buffer_read_int();
	}
	
	RealType settings_load_legacy_recent(ScopeAny self, StringType fn)
	{
		if (!file_exists_lib(fn))
			return IntType(0);
		log({ /*"Loading legacy recent files"*/ STR(2801), fn });
		global::buffer_current = buffer_load_lib(fn);
		sVar(recent_amount) = buffer_read_byte();
		for (IntType _it = 0, _it_max = sVar(recent_amount); _it < _it_max; _it++)
		{
			withOne (obj_recent, (new obj_recent)->id, self->id)
			{
				self->filename = buffer_read_string_int();
				self->name = buffer_read_string_int();
				self->author = buffer_read_string_int();
				self->description = buffer_read_string_int();
				buffer_read_double();
				StringType thumbnailfn = filename_path(self->filename) + /*"thumbnail.png"*/ STR(2570);
				if (file_exists_lib(thumbnailfn))
					self->thumbnail = texture_create(thumbnailfn);
				else
					self->thumbnail = null_;
				
				ds_list_add({ global::_app->recent_list, self->id });
			}
			
		}
		buffer_delete(global::buffer_current);
		return 0.0;
	}
	
	void settings_save(ScopeAny self)
	{
		log({ /*"Saving settings"*/ STR(2802), settings_file });
		json_save_start(settings_file);
		json_save_object_start();
		json_save_var(/*"format"*/ STR(92), settings_format);
		json_save_object_start({ /*"assets"*/ STR(717) });
		json_save_var(/*"version"*/ STR(91), sStr(setting_minecraft_assets_version));
		if (sVar(setting_minecraft_assets_new_version) != /*""*/ STR(0))
		{
			json_save_object_start({ /*"new"*/ STR(2695) });
			json_save_var(/*"version"*/ STR(91), sVar(setting_minecraft_assets_new_version));
			json_save_var(/*"format"*/ STR(92), sVar(setting_minecraft_assets_new_format));
			json_save_var(/*"changes"*/ STR(93), json_string_encode(sVar(setting_minecraft_assets_new_changes)));
			json_save_var(/*"image"*/ STR(94), json_string_encode(sStr(setting_minecraft_assets_new_image)));
			json_save_object_done();
		}
		json_save_object_done();
		json_save_array_start({ /*"recent_files"*/ STR(2803) });
		for (IntType i = IntType(0); i < ds_list_size(sInt(recent_list)); i++)
		{
			withOne (Object, DsList(sInt(recent_list)).Value(i), self->id)
			{
				json_save_object_start();
				json_save_var(/*"filename"*/ STR(1276), json_string_encode(sVar(filename)));
				json_save_var(/*"name"*/ STR(820), json_string_encode(sVar(name)));
				json_save_var(/*"author"*/ STR(2375), json_string_encode(sVar(author)));
				json_save_var(/*"description"*/ STR(1854), json_string_encode(sVar(description)));
				json_save_object_done();
			}
			
		}
		json_save_array_done();
		json_save_array_start({ /*"closed_toasts"*/ STR(2696) });
		for (IntType i = IntType(0); i < ds_list_size(sInt(closed_toast_list)); i++)
			json_save_array_value(DsList(sInt(closed_toast_list)).Value(i));
		json_save_array_done();
		json_save_object_start({ /*"program"*/ STR(2697) });
		if (sReal(setting_advanced_mode) > 0)
			json_save_var(/*"advanced_mode"*/ STR(2698), sReal(setting_advanced_mode));
		json_save_var(/*"fps"*/ STR(2699), gmlGlobal::room_speed);
		json_save_var(/*"project_folder"*/ STR(2700), json_string_encode(sStr(setting_project_folder)));
		json_save_var_bool(/*"backup"*/ STR(120), sVar(setting_backup));
		json_save_var(/*"backup_time"*/ STR(2701), sReal(setting_backup_time));
		json_save_var(/*"backup_amount"*/ STR(2702), sReal(setting_backup_amount));
		json_save_var_bool(/*"spawn_cameras"*/ STR(2703), sVar(setting_spawn_cameras));
		json_save_var_bool(/*"unlimited_values"*/ STR(2704), sReal(setting_unlimited_values));
		json_save_var_bool(/*"scenery_remove_edges"*/ STR(2804), sVar(setting_scenery_remove_edges));
		json_save_var_bool(/*"watermark_custom"*/ STR(2705), sVar(setting_watermark_custom));
		json_save_var(/*"watermark_fn"*/ STR(2706), sStr(setting_watermark_fn));
		json_save_var(/*"watermark_halign"*/ STR(2707), sVar(setting_watermark_halign));
		json_save_var(/*"watermark_valign"*/ STR(2708), sVar(setting_watermark_valign));
		json_save_var(/*"watermark_padding"*/ STR(2709), sReal(setting_watermark_padding));
		json_save_var(/*"watermark_scale"*/ STR(2710), sReal(setting_watermark_scale));
		json_save_var(/*"watermark_opacity"*/ STR(2711), sReal(setting_watermark_opacity));
		json_save_object_done();
		json_save_object_start({ /*"interface"*/ STR(2712) });
		json_save_var(/*"language_filename"*/ STR(2713), json_string_encode(sStr(setting_language_filename)));
		json_save_var(/*"theme"*/ STR(2714), ObjType(obj_theme, sInt(setting_theme))->name);
		json_save_var(/*"accent"*/ STR(2715), sInt(setting_accent));
		json_save_var_color(/*"accent_custom"*/ STR(2716), sVar(setting_accent_custom));
		json_save_var_bool(/*"timeline_autoscroll"*/ STR(2717), sVar(setting_timeline_autoscroll));
		json_save_var_bool(/*"timeline_show_markers"*/ STR(2718), sBool(setting_timeline_show_markers));
		json_save_var_bool(/*"interface_compact"*/ STR(2719), sVar(setting_interface_compact));
		json_save_var_bool(/*"timeline_compact"*/ STR(2720), sReal(setting_timeline_compact));
		json_save_var_bool(/*"reduced_motion"*/ STR(2721), sVar(setting_reduced_motion));
		json_save_var_bool(/*"timeline_select_jump"*/ STR(2722), sVar(setting_timeline_select_jump));
		json_save_var_bool(/*"timeline_hide_ghosts"*/ STR(2723), sVar(setting_timeline_hide_ghosts));
		json_save_var_bool(/*"timeline_frame_snap"*/ STR(2724), sVar(setting_timeline_frame_snap));
		json_save_var_bool(/*"z_is_up"*/ STR(2725), sReal(setting_z_is_up));
		json_save_var_bool(/*"separate_tool_modes"*/ STR(2732), sVar(setting_separate_tool_modes));
		json_save_var_bool(/*"show_shortcuts_bar"*/ STR(2726), sBool(setting_show_shortcuts_bar));
		json_save_var_bool(/*"gizmos_face_camera"*/ STR(2727), sVar(setting_gizmos_face_camera));
		json_save_var_bool(/*"fade_gizmos"*/ STR(2728), sVar(setting_fade_gizmos));
		json_save_var_bool(/*"camera_lock_mouse"*/ STR(2729), sVar(setting_camera_lock_mouse));
		json_save_var_bool(/*"place_new"*/ STR(2730), sVar(setting_place_new));
		json_save_var(/*"scale"*/ STR(890), sVar(setting_interface_scale));
		json_save_var_bool(/*"scale_auto"*/ STR(2731), sVar(setting_interface_scale_auto));
		json_save_var(/*"panel_left_bottom_size"*/ STR(2733), ObjType(obj_panel, DsMap(sInt(panel_map)).Value(/*"left_secondary"*/ STR(199)))->size);
		json_save_var(/*"panel_right_bottom_size"*/ STR(2734), ObjType(obj_panel, DsMap(sInt(panel_map)).Value(/*"right_secondary"*/ STR(200)))->size);
		json_save_var(/*"panel_bottom_size"*/ STR(2735), ObjType(obj_panel, DsMap(sInt(panel_map)).Value(/*"bottom"*/ STR(201)))->size);
		json_save_var(/*"panel_top_size"*/ STR(2736), ObjType(obj_panel, DsMap(sInt(panel_map)).Value(/*"top"*/ STR(202)))->size);
		json_save_var(/*"panel_left_top_size"*/ STR(2737), ObjType(obj_panel, DsMap(sInt(panel_map)).Value(/*"left"*/ STR(203)))->size);
		json_save_var(/*"panel_right_top_size"*/ STR(2738), ObjType(obj_panel, DsMap(sInt(panel_map)).Value(/*"right"*/ STR(204)))->size);
		json_save_var(/*"properties_location"*/ STR(2739), ObjType(obj_panel, ObjType(obj_tab, sInt(properties))->panel)->location);
		json_save_var(/*"ground_editor_location"*/ STR(2740), ObjType(obj_panel, ObjType(obj_tab, sInt(ground_editor))->panel)->location);
		json_save_var(/*"template_editor_location"*/ STR(2741), ObjType(obj_panel, ObjType(obj_tab, sInt(template_editor))->panel)->location);
		json_save_var(/*"timeline_location"*/ STR(2805), ObjType(obj_panel, idInt(sVar(timeline), panel))->location);
		json_save_var(/*"timeline_editor_location"*/ STR(2742), ObjType(obj_panel, ObjType(obj_tab, sInt(timeline_editor))->panel)->location);
		json_save_var(/*"frame_editor_location"*/ STR(2743), ObjType(obj_panel, ObjType(obj_tab, sInt(frame_editor))->panel)->location);
		json_save_var(/*"settings_location"*/ STR(2744), ObjType(obj_panel, ObjType(obj_tab, sInt(settings))->panel)->location);
		if (window_exists(e_window_TIMELINE))
		{
			json_save_object_start({ /*"timeline_window"*/ STR(2745) });
			window_state_save(e_window_TIMELINE);
			json_save_object_done();
		}
		json_save_var(/*"view_split"*/ STR(2746), sReal(view_split));
		json_save_var_bool(/*"view_main_overlays"*/ STR(2747), ObjType(obj_view, sInt(view_main))->overlays);
		json_save_var_bool(/*"view_main_aspect_ratio"*/ STR(2748), ObjType(obj_view, sInt(view_main))->aspect_ratio);
		json_save_var_bool(/*"view_main_grid"*/ STR(2749), ObjType(obj_view, sInt(view_main))->grid);
		json_save_var_bool(/*"view_main_gizmos"*/ STR(2750), ObjType(obj_view, sInt(view_main))->gizmos);
		json_save_var_bool(/*"view_main_effects"*/ STR(2752), ObjType(obj_view, sInt(view_main))->effects);
		json_save_var_bool(/*"view_main_particles"*/ STR(2753), ObjType(obj_view, sInt(view_main))->particles);
		json_save_var(/*"view_main_location"*/ STR(2754), ObjType(obj_view, sInt(view_main))->location);
		json_save_var_bool(/*"view_second_show"*/ STR(2755), ObjType(obj_view, sInt(view_second))->show);
		json_save_var_bool(/*"view_second_overlays"*/ STR(2756), ObjType(obj_view, sInt(view_second))->overlays);
		json_save_var_bool(/*"view_second_aspect_ratio"*/ STR(2757), ObjType(obj_view, sInt(view_second))->aspect_ratio);
		json_save_var_bool(/*"view_second_grid"*/ STR(2758), ObjType(obj_view, sInt(view_second))->grid);
		json_save_var_bool(/*"view_second_gizmos"*/ STR(2759), ObjType(obj_view, sInt(view_second))->gizmos);
		json_save_var_bool(/*"view_second_effects"*/ STR(2761), ObjType(obj_view, sInt(view_second))->effects);
		json_save_var_bool(/*"view_second_particles"*/ STR(2762), ObjType(obj_view, sInt(view_second))->particles);
		json_save_var(/*"view_second_location"*/ STR(2763), ObjType(obj_view, sInt(view_second))->location);
		json_save_var(/*"view_second_width"*/ STR(2764), ObjType(obj_view, sInt(view_second))->width);
		json_save_var(/*"view_second_height"*/ STR(2765), ObjType(obj_view, sInt(view_second))->height);
		if (window_exists(e_window_VIEW_SECOND))
		{
			json_save_object_start({ /*"view_second_window"*/ STR(2766) });
			window_state_save(e_window_VIEW_SECOND);
			json_save_object_done();
		}
		json_save_var_bool(/*"snap"*/ STR(304), sReal(setting_snap));
		json_save_var_bool(/*"snap_absolute"*/ STR(2767), sVar(setting_snap_absolute));
		json_save_var(/*"snap_size_position"*/ STR(2768), sReal(setting_snap_size_position));
		json_save_var(/*"snap_size_rotation"*/ STR(2769), sReal(setting_snap_size_rotation));
		json_save_var(/*"snap_size_scale"*/ STR(2770), sReal(setting_snap_size_scale));
		json_save_var_bool(/*"setting_select_locked_parent"*/ STR(2771), sVar(setting_select_locked_parent));
		json_save_var_bool(/*"modelbench_popup_hidden"*/ STR(2772), ObjType(obj_popup, sInt(popup_modelbench))->hidden);
		json_save_object_done();
		json_save_object_start({ /*"controls"*/ STR(2773) });
		VarType obj;
		for (IntType i = IntType(0); i < e_keybind_amount; i++)
		{
			obj = global::keybinds.Value(i);
			json_save_var(idVar(obj, name), idVar(obj, keybind));
		}
		json_save_var(/*"move_speed"*/ STR(2774), sReal(setting_move_speed));
		json_save_var(/*"look_sensitivity"*/ STR(2775), sReal(setting_look_sensitivity));
		json_save_var(/*"fast_modifier"*/ STR(2776), sReal(setting_fast_modifier));
		json_save_var(/*"slow_modifier"*/ STR(2777), sReal(setting_slow_modifier));
		json_save_object_done();
		json_save_object_start({ /*"export"*/ STR(2778) });
		json_save_var(/*"exportmovie_format"*/ STR(2779), ObjType(obj_popup, sInt(popup_exportmovie))->format);
		json_save_var(/*"exportmovie_frame_rate"*/ STR(2780), ObjType(obj_popup, sInt(popup_exportmovie))->frame_rate);
		json_save_var(/*"exportmovie_framespersecond"*/ STR(2781), ObjType(obj_popup, sInt(popup_exportmovie))->framespersecond);
		json_save_var(/*"exportmovie_bit_rate"*/ STR(2782), ObjType(obj_popup, sInt(popup_exportmovie))->bit_rate);
		json_save_var_bool(/*"exportmovie_include_audio"*/ STR(2783), ObjType(obj_popup, sInt(popup_exportmovie))->include_audio);
		json_save_var_bool(/*"exportmovie_remove_background"*/ STR(2784), ObjType(obj_popup, sInt(popup_exportmovie))->remove_background);
		json_save_var_bool(/*"exportmovie_include_hidden"*/ STR(2806), ObjType(obj_popup, sInt(popup_exportmovie))->include_hidden);
		json_save_var_bool(/*"exportmovie_high_quality"*/ STR(2785), ObjType(obj_popup, sInt(popup_exportmovie))->high_quality);
		json_save_var_bool(/*"exportmovie_watermark"*/ STR(2786), ObjType(obj_popup, sInt(popup_exportmovie))->watermark);
		json_save_var_bool(/*"exportimage_remove_background"*/ STR(2787), ObjType(obj_popup, sInt(popup_exportimage))->remove_background);
		json_save_var_bool(/*"exportimage_include_hidden"*/ STR(2788), ObjType(obj_popup, sInt(popup_exportimage))->include_hidden);
		json_save_var_bool(/*"exportimage_high_quality"*/ STR(2789), ObjType(obj_popup, sInt(popup_exportimage))->high_quality);
		json_save_var_bool(/*"exportimage_watermark"*/ STR(2790), ObjType(obj_popup, sInt(popup_exportimage))->watermark);
		json_save_object_done();
		json_save_object_start({ /*"collapse"*/ STR(1099) });
		VarType key = ds_map_find_first(global::collapse_map);
		while (!is_undefined(key))
		{
			json_save_var_bool(key, DsMap(global::collapse_map).Value(key));
			key = ds_map_find_next(global::collapse_map, key);
		}
		
		json_save_object_done();
		json_save_object_start({ /*"main_window"*/ STR(2791) });
		window_state_save(e_window_MAIN);
		json_save_object_done();
		json_save_object_start({ /*"world_import"*/ STR(2794) });
		json_save_var_bool(/*"filter_enabled"*/ STR(2795), sVar(setting_world_import_filter_enabled));
		json_save_var(/*"filter_mode"*/ STR(2796), sVar(setting_world_import_filter_mode));
		json_save_array_start({ /*"filter_list"*/ STR(2797) });
		for (IntType i = IntType(0); i < ds_list_size(sInt(setting_world_import_filter_list)); i++)
			json_save_array_value(DsList(sInt(setting_world_import_filter_list)).Value(i));
		json_save_array_done();
		json_save_var_bool(/*"unload_regions"*/ STR(2798), sVar(setting_world_import_unload_regions));
		json_save_object_done();
		json_save_object_done();
		json_save_done();
		debug({ /*"Saved settings"*/ STR(2807) });
	}
	
	void settings_startup(ScopeAny self)
	{
		trial_startup();
		sReal(setting_advanced_mode) = dev_mode_advanced;
		sStr(setting_minecraft_assets_version) = minecraft_version;
		sVar(setting_minecraft_assets_new_version) = /*""*/ STR(0);
		sVar(setting_minecraft_assets_new_format) = IntType(0);
		sVar(setting_minecraft_assets_new_changes) = /*""*/ STR(0);
		sStr(setting_minecraft_assets_new_image) = /*""*/ STR(0);
		sStr(setting_project_folder) = projects_directory;
		directory_create_lib(sStr(setting_project_folder));
		sInt(closed_toast_list) = ds_list_create();
		sReal(backup_text_ani) = IntType(0);
		sInt(backup_next) = IntType(0);
		sVar(setting_backup) = true;
		sReal(setting_backup_time) = IntType(3);
		sReal(setting_backup_amount) = IntType(5);
		sVar(setting_spawn_cameras) = true;
		sReal(setting_unlimited_values) = false;
		sVar(setting_watermark_custom) = false;
		sStr(setting_watermark_fn) = /*""*/ STR(0);
		sInt(setting_watermark_image) = null_;
		sVar(setting_watermark_halign) = /*"right"*/ STR(204);
		sVar(setting_watermark_valign) = /*"bottom"*/ STR(201);
		sReal(setting_watermark_padding) = IntType(0);
		sReal(setting_watermark_scale) = .33;
		sReal(setting_watermark_opacity) = IntType(1);
		sInt(setting_theme) = global::theme_darker;
		sInt(setting_accent) = IntType(7);
		sVar(setting_accent_custom) = hex_to_color(/*"03A9F4"*/ STR(2808));
		sStr(setting_language_filename) = language_file;
		sVar(setting_timeline_autoscroll) = true;
		sReal(setting_timeline_compact) = false;
		sBool(setting_timeline_show_markers) = true;
		sVar(setting_timeline_select_jump) = true;
		sVar(setting_timeline_hide_ghosts) = false;
		sVar(setting_timeline_frame_snap) = false;
		sReal(setting_z_is_up) = false;
		sVar(setting_separate_tool_modes) = false;
		sBool(setting_show_shortcuts_bar) = true;
		sVar(setting_gizmos_face_camera) = true;
		sVar(setting_fade_gizmos) = true;
		sVar(setting_camera_lock_mouse) = (platform_get() != e_platform_MAC_OS);
		sVar(setting_place_new) = true;
		sVar(setting_interface_scale_auto) = true;
		sVar(setting_interface_scale) = interface_scale_default_get();
		sVar(setting_interface_compact) = false;
		sVar(setting_panel_left_bottom_size) = IntType(300);
		sVar(setting_panel_right_bottom_size) = IntType(300);
		sVar(setting_panel_bottom_size) = IntType(300);
		sVar(setting_panel_top_size) = IntType(205);
		sVar(setting_panel_left_top_size) = IntType(300);
		sVar(setting_panel_right_top_size) = IntType(300);
		sVar(setting_properties_location) = /*"right"*/ STR(204);
		sVar(setting_ground_editor_location) = /*"right_secondary"*/ STR(200);
		sVar(setting_template_editor_location) = /*"right_secondary"*/ STR(200);
		sVar(setting_timeline_editor_location) = /*"right"*/ STR(204);
		sVar(setting_frame_editor_location) = /*"right_secondary"*/ STR(200);
		sVar(setting_settings_location) = /*"right_secondary"*/ STR(200);
		sVar(setting_view_split) = 0.5;
		sVar(setting_view_main_overlays) = true;
		sVar(setting_view_main_aspect_ratio) = false;
		sVar(setting_view_main_grid) = false;
		sVar(setting_view_main_gizmos) = true;
		sVar(setting_view_main_fog) = true;
		sVar(setting_view_main_effects) = true;
		sVar(setting_view_main_particles) = true;
		sVar(setting_view_main_location) = /*"full"*/ STR(2809);
		sVar(setting_view_second_show) = false;
		sVar(setting_view_second_overlays) = true;
		sVar(setting_view_second_aspect_ratio) = true;
		sVar(setting_view_second_grid) = false;
		sVar(setting_view_second_gizmos) = false;
		sVar(setting_view_second_fog) = true;
		sVar(setting_view_second_effects) = true;
		sVar(setting_view_second_particles) = true;
		sVar(setting_view_second_location) = /*"right_bottom"*/ STR(2810);
		sVar(setting_view_second_width) = IntType(440);
		sVar(setting_view_second_height) = IntType(280);
		sVar(setting_modelbench_popup_hidden) = false;
		sReal(setting_move_speed) = IntType(1);
		sReal(setting_look_sensitivity) = IntType(1);
		sReal(setting_fast_modifier) = IntType(3);
		sReal(setting_slow_modifier) = 0.25;
		sVar(setting_scenery_remove_edges) = true;
		sVar(setting_export_movie_format) = /*"mp4"*/ STR(61);
		sVar(setting_export_movie_frame_rate) = IntType(30);
		sVar(setting_export_movie_framespersecond) = IntType(30);
		sVar(setting_export_movie_bit_rate) = IntType(2500000);
		sVar(setting_export_movie_include_audio) = true;
		sVar(setting_export_movie_remove_background) = false;
		sVar(setting_export_movie_include_hidden) = false;
		sVar(setting_export_movie_high_quality) = true;
		sVar(setting_export_movie_watermark) = global::trial_version;
		sVar(setting_export_image_remove_background) = false;
		sVar(setting_export_image_include_hidden) = false;
		sVar(setting_export_image_high_quality) = true;
		sVar(setting_export_image_watermark) = global::trial_version;
		sInt(project_render_pass) = e_render_pass_COMBINED;
		sVar(setting_world_import_filter_enabled) = false;
		sVar(setting_world_import_filter_mode) = IntType(0);
		sInt(setting_world_import_filter_list) = ds_list_create();
		sVar(setting_world_import_unload_regions) = true;
		sReal(setting_snap) = false;
		sVar(setting_snap_absolute) = true;
		sReal(setting_snap_size_position) = IntType(1);
		sReal(setting_snap_size_rotation) = IntType(15);
		sReal(setting_snap_size_scale) = IntType(1);
		sVar(setting_select_locked_parent) = false;
		sBool(setting_tool_select) = false;
		sVar(setting_tool_move) = true;
		sBool(setting_tool_rotate) = true;
		sBool(setting_tool_scale) = false;
		sBool(setting_tool_bend) = true;
		sBool(setting_tool_transform) = false;
		sVar(setting_main_window_rect) = null_;
		sVar(setting_main_window_maximized) = true;
		sVar(setting_reduced_motion) = false;
		sBool(setting_wind_enable) = true;
		settings_load(self);
		languages_load();
		interface_update_instant(self);
	}
	
	void shader_add_set(ScopeAny self, VarArgs argument)
	{
		IntType argument_count = argument.Size();
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uAddTexture"*/ STR(2811)), surface_get_texture((IntType)(argument[IntType(0)])));
		gpu_set_texfilter_ext(DsMap(sInt(sampler_map)).Value(/*"uAddTexture"*/ STR(2811)), false);
		render_set_uniform(/*"uAmount"*/ STR(2812), argument[IntType(1)]);
		if (argument_count > IntType(2))
			render_set_uniform_color(/*"uBlendColor"*/ STR(1961), argument[IntType(2)], IntType(1));
		else
			render_set_uniform_color(/*"uBlendColor"*/ STR(1961), c_white, IntType(1));
		
		if (argument_count > IntType(3))
			render_set_uniform(/*"uPower"*/ STR(2813), argument[IntType(3)]);
		else
			render_set_uniform(/*"uPower"*/ STR(2813), IntType(1));
		
	}
	
	void shader_blur_set(VarType kernel, RealType radius, RealType xdir, RealType ydir)
	{
		render_set_uniform_vec2(/*"uScreenSize"*/ STR(2814), global::render_width, global::render_height);
		render_set_uniform(/*"uKernel"*/ STR(2815), kernel);
		render_set_uniform_int(/*"uSamples"*/ STR(2816), (RealType)array_length(VarType::CreateRef(kernel)) / 2.0);
		render_set_uniform(/*"uRadius"*/ STR(2817), radius);
		render_set_uniform_vec2(/*"uDirection"*/ STR(2818), xdir, ydir);
	}
	
	void shader_border_set(ScopeAny self)
	{
		render_set_uniform_vec2(/*"uTexSize"*/ STR(2819), global::render_width, global::render_height);
		render_set_uniform_color(/*"uColor"*/ STR(2820), sVar(border_mode) == e_render_mode_SELECT ? c_white : c_yellow, IntType(1));
	}
	
	void shader_ca_set()
	{
		render_set_uniform(/*"uBlurAmount"*/ STR(2821), idVar(global::render_camera, value).Value(e_value_CAM_CA_BLUR_AMOUNT));
		render_set_uniform_vec3(/*"uColorOffset"*/ STR(2822), idVar(global::render_camera, value).Value(e_value_CAM_CA_RED_OFFSET), idVar(global::render_camera, value).Value(e_value_CAM_CA_GREEN_OFFSET), idVar(global::render_camera, value).Value(e_value_CAM_CA_BLUE_OFFSET));
		render_set_uniform_int(/*"uDistortChannels"*/ STR(2823), idVar(global::render_camera, value).Value(e_value_CAM_CA_DISTORT_CHANNELS));
	}
	
	void shader_clear()
	{
		gpu_set_tex_mip_enable(mip_off);
		texture_set_stage(IntType(0), IntType(0));
		shader_reset();
		global::shader_texture_surface = false;
		global::shader_texture_filter_linear = false;
		global::shader_texture_filter_mipmap = false;
		global::shader_texture_width = IntType(0);
		global::shader_texture_height = IntType(0);
	}
	
	void shader_clip_set(VarType xx, VarType yy, VarType w, VarType h)
	{
		render_set_uniform(/*"uBox"*/ STR(2824), ArrType::From({ xx, yy, w, h }));
		render_set_uniform(/*"uScreenSize"*/ STR(2814), ArrType::From({ IntType(1), IntType(1) }));
	}
	
	void shader_color_camera_set()
	{
		render_set_uniform(/*"uEmissive"*/ STR(2590), idVar(global::render_camera, value).Value(e_value_EMISSIVE));
		render_set_uniform_color(/*"uBlendColor"*/ STR(1961), idVar(global::render_camera, value).Value(e_value_RGB_MUL), idVar(global::render_camera, value).Value(e_value_ALPHA));
		render_set_uniform_color(/*"uRGBAdd"*/ STR(2134), idVar(global::render_camera, value).Value(e_value_RGB_ADD), IntType(1));
		render_set_uniform_color(/*"uRGBSub"*/ STR(2135), idVar(global::render_camera, value).Value(e_value_RGB_SUB), IntType(1));
		render_set_uniform_color(/*"uHSBAdd"*/ STR(2136), idVar(global::render_camera, value).Value(e_value_HSB_ADD), IntType(1));
		render_set_uniform_color(/*"uHSBSub"*/ STR(2137), idVar(global::render_camera, value).Value(e_value_HSB_SUB), IntType(1));
		render_set_uniform_color(/*"uHSBMul"*/ STR(2138), idVar(global::render_camera, value).Value(e_value_HSB_MUL), IntType(1));
		render_set_uniform_color(/*"uMixColor"*/ STR(2139), idVar(global::render_camera, value).Value(e_value_MIX_COLOR), idVar(global::render_camera, value).Value(e_value_MIX_PERCENT));
	}
	
	void shader_color_correction_set()
	{
		render_set_uniform(/*"uContrast"*/ STR(2825), idVar(global::render_camera, value).Value(e_value_CAM_CONTRAST) + IntType(1));
		render_set_uniform(/*"uBrightness"*/ STR(2826), idVar(global::render_camera, value).Value(e_value_CAM_BRIGHTNESS));
		render_set_uniform(/*"uSaturation"*/ STR(2827), idVar(global::render_camera, value).Value(e_value_CAM_SATURATION));
		render_set_uniform(/*"uVibrance"*/ STR(2828), idVar(global::render_camera, value).Value(e_value_CAM_VIBRANCE));
		render_set_uniform_color(/*"uColorBurn"*/ STR(2829), idVar(global::render_camera, value).Value(e_value_CAM_COLOR_BURN), IntType(1));
	}
	
	void shader_color_fog_lights_set()
	{
		render_set_uniform_int(/*"uIsGround"*/ STR(2593), IntType(0));
		render_set_uniform_int(/*"uIsSky"*/ STR(2596), IntType(0));
		render_set_uniform_int(/*"uColorsExt"*/ STR(2133), IntType(0));
		render_set_uniform_vec3(/*"uSunDirection"*/ STR(2830), global::_app->background_sun_direction.Real(X_), global::_app->background_sun_direction.Real(Y_), global::_app->background_sun_direction.Real(Z_));
		render_set_uniform_int(/*"uLightAmount"*/ STR(2831), global::_app->background_light_amount);
		render_set_uniform(/*"uLightData"*/ STR(2832), global::_app->background_light_data);
		render_set_uniform_color(/*"uAmbientColor"*/ STR(2833), global::_app->background_ambient_color_final, IntType(1));
		render_set_uniform(/*"uEmissive"*/ STR(2590), IntType(0));
		render_set_uniform_color(/*"uFallbackColor"*/ STR(2834), (global::render_background > 0) ? global::_app->background_sky_color_final : c_black, IntType(1));
		render_set_uniform_int(/*"uTonemapper"*/ STR(2835), global::render_tonemapper);
		render_set_uniform(/*"uExposure"*/ STR(2836), global::render_exposure);
		render_set_uniform(/*"uGamma"*/ STR(2837), global::render_gamma);
	}
	
	void shader_depth_point_set()
	{
		render_set_uniform_vec3(/*"uEye"*/ STR(2838), global::render_proj_from.Real(X_), global::render_proj_from.Real(Y_), global::render_proj_from.Real(Z_));
		render_set_uniform(/*"uNear"*/ STR(2839), global::proj_depth_near);
		render_set_uniform(/*"uFar"*/ STR(2840), global::proj_depth_far);
	}
	
	void shader_depth_set()
	{
		render_set_uniform(/*"uNear"*/ STR(2839), global::proj_depth_near);
		render_set_uniform(/*"uFar"*/ STR(2840), global::proj_depth_far);
	}
	
	void shader_distort_set()
	{
		render_set_uniform(/*"uDistortAmount"*/ STR(2841), idVar(global::render_camera, value).Value(e_value_CAM_DISTORT_AMOUNT));
		render_set_uniform_int(/*"uRepeatImage"*/ STR(2842), idVar(global::render_camera, value).Value(e_value_CAM_DISTORT_REPEAT));
		render_set_uniform(/*"uZoomAmount"*/ STR(2843), idVar(global::render_camera, value).Value(e_value_CAM_DISTORT_ZOOM_AMOUNT));
	}
	
	void shader_high_bloom_threshold_set()
	{
		render_set_uniform(/*"uThreshold"*/ STR(2844), idVar(global::render_camera, value).Value(e_value_CAM_BLOOM_THRESHOLD));
	}
	
	void shader_high_depth_normal_set()
	{
		render_set_uniform(/*"uNormalBufferScale"*/ STR(2845), is_cpp() ? normal_buffer_scale : IntType(1));
		render_set_uniform(/*"uNear"*/ STR(2839), global::depth_near);
		render_set_uniform(/*"uFar"*/ STR(2840), global::depth_far);
	}
	
	void shader_high_dof_coc_blur_set(RealType checkx, RealType checky)
	{
		render_set_uniform_vec2(/*"uScreenSize"*/ STR(2814), global::render_width, global::render_height);
		render_set_uniform_vec2(/*"uPixelCheck"*/ STR(2846), checkx, checky);
	}
	
	void shader_high_dof_coc_set(ScopeAny self, VarType depthbuffer)
	{
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer"*/ STR(2847)), surface_get_texture((IntType)(depthbuffer)));
		gpu_set_texfilter_ext(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer"*/ STR(2847)), false);
		render_set_uniform(/*"uDepth"*/ STR(2848), idVar(global::render_camera, value).Value(e_value_CAM_DOF_DEPTH));
		render_set_uniform(/*"uRange"*/ STR(2849), idVar(global::render_camera, value).Value(e_value_CAM_DOF_RANGE));
		render_set_uniform(/*"uFadeSize"*/ STR(2850), idVar(global::render_camera, value).Value(e_value_CAM_DOF_FADE_SIZE));
		render_set_uniform(/*"uNear"*/ STR(2839), global::cam_near);
		render_set_uniform(/*"uFar"*/ STR(2840), global::cam_far);
	}
	
	void shader_high_dof_set(ScopeAny self, VarType blurbuffer)
	{
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uBlurBuffer"*/ STR(2851)), surface_get_texture((IntType)(blurbuffer)));
		gpu_set_texfilter_ext(DsMap(sInt(sampler_map)).Value(/*"uBlurBuffer"*/ STR(2851)), false);
		render_set_uniform_vec2(/*"uScreenSize"*/ STR(2814), global::render_width, global::render_height);
		render_set_uniform(/*"uBlurSize"*/ STR(2852), idVar(global::render_camera, value).Value(e_value_CAM_DOF_BLUR_SIZE));
		render_set_uniform(/*"uBias"*/ STR(2853), idVar(global::render_camera, value).Value(e_value_CAM_DOF_BIAS));
		render_set_uniform(/*"uThreshold"*/ STR(2844), idVar(global::render_camera, value).Value(e_value_CAM_DOF_THRESHOLD));
		render_set_uniform(/*"uGain"*/ STR(2854), idVar(global::render_camera, value).Value(e_value_CAM_DOF_GAIN));
		render_set_uniform_int(/*"uFringe"*/ STR(2855), bool_to_float(idVar(global::render_camera, value).Value(e_value_CAM_DOF_FRINGE)));
		render_set_uniform_vec3(/*"uFringeAngle"*/ STR(2856), -degtorad(idVar(global::render_camera, value).Value(e_value_CAM_DOF_FRINGE_ANGLE_RED) + 180.0), -degtorad(idVar(global::render_camera, value).Value(e_value_CAM_DOF_FRINGE_ANGLE_GREEN) + 180.0), -degtorad(idVar(global::render_camera, value).Value(e_value_CAM_DOF_FRINGE_ANGLE_BLUE) + 180.0));
		render_set_uniform_vec3(/*"uFringeStrength"*/ STR(2857), idVar(global::render_camera, value).Value(e_value_CAM_DOF_FRINGE_RED), idVar(global::render_camera, value).Value(e_value_CAM_DOF_FRINGE_GREEN), idVar(global::render_camera, value).Value(e_value_CAM_DOF_FRINGE_BLUE));
		render_generate_dof_samples(idVar(global::render_camera, value).Value(e_value_CAM_BLADE_AMOUNT), idVar(global::render_camera, value).Value(e_value_CAM_BLADE_ANGLE), idVar(global::render_camera, value).Value(e_value_CAM_DOF_BLUR_RATIO));
		render_set_uniform_int(/*"uSampleAmount"*/ STR(2858), global::render_dof_sample_amount);
		render_set_uniform(/*"uSamples"*/ STR(2816), global::render_dof_samples);
		render_set_uniform(/*"uWeightSamples"*/ STR(2859), global::render_dof_weight_samples);
	}
	
	void shader_high_fog_apply_set(ScopeAny self, VarType fogbuffer)
	{
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uFogBuffer"*/ STR(2860)), surface_get_texture((IntType)(fogbuffer)));
		render_set_uniform_color(/*"uFogColor"*/ STR(1971), global::_app->background_fog_object_color_final, IntType(1));
	}
	
	void shader_high_indirect_blur_set(ScopeAny self)
	{
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer"*/ STR(2847)), surface_get_texture((IntType)(global::render_surface_depth)));
		gpu_set_texrepeat_ext(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer"*/ STR(2847)), false);
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uNormalBuffer"*/ STR(2861)), surface_get_texture((IntType)(global::render_surface_normal)));
		gpu_set_texrepeat_ext(DsMap(sInt(sampler_map)).Value(/*"uNormalBuffer"*/ STR(2861)), false);
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uNoiseBuffer"*/ STR(2862)), surface_get_texture(global::render_sample_noise_texture));
		gpu_set_texfilter_ext(DsMap(sInt(sampler_map)).Value(/*"uNoiseBuffer"*/ STR(2862)), false);
		render_set_uniform(/*"uNormalBufferScale"*/ STR(2845), is_cpp() ? normal_buffer_scale : IntType(1));
		render_set_uniform(/*"uNoiseSize"*/ STR(2863), global::render_sample_noise_size);
		render_set_uniform_vec2(/*"uScreenSize"*/ STR(2814), global::render_width, global::render_height);
		render_set_uniform(/*"uSamples"*/ STR(2816), global::render_samples);
		render_set_uniform(/*"uBlurSize"*/ STR(2852), global::_app->project_render_indirect_blur_radius);
	}
	
	void shader_high_lighting_apply_set(ScopeAny self, VarType shadows, VarType mask, VarType material)
	{
		render_set_uniform_int(/*"uShadowsEnabled"*/ STR(2864), global::render_shadows || global::render_ssao);
		if ((global::render_shadows || global::render_ssao) && surface_exists((IntType)(shadows)))
			texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uShadows"*/ STR(2865)), surface_get_texture((IntType)(shadows)));
		if (surface_exists((IntType)(global::render_surface_specular)))
		{
			render_set_uniform_int(/*"uSpecularEnabled"*/ STR(2866), true);
			texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uSpecular"*/ STR(2867)), surface_get_texture((IntType)(global::render_surface_specular)));
		}
		else
			render_set_uniform_int(/*"uSpecularEnabled"*/ STR(2866), false);
		
		if (global::render_shadows && surface_exists((IntType)(global::render_surface_emissive)))
			texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uEmissive"*/ STR(2590)), surface_get_texture((IntType)(global::render_surface_emissive)));
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uMask"*/ STR(2868)), surface_get_texture((IntType)(mask)));
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uMaterialBuffer"*/ STR(2869)), surface_get_texture((IntType)(material)));
		render_set_uniform(/*"uIndirectEnabled"*/ STR(2870), global::render_indirect);
		render_set_uniform(/*"uIndirectStrength"*/ STR(2871), global::_app->project_render_indirect_strength);
		render_set_uniform(/*"uReflectionsEnabled"*/ STR(2872), global::render_reflections);
		render_set_uniform_color(/*"uFallbackColor"*/ STR(2834), global::_app->background_sky_color_final, IntType(1));
		render_set_uniform(/*"uGamma"*/ STR(2837), global::render_gamma);
	}
	
	void shader_high_light_point_set(ScopeAny self)
	{
		render_set_uniform_int(/*"uIsSky"*/ STR(2596), IntType(0));
		render_set_uniform_int(/*"uIsWater"*/ STR(2591), IntType(0));
		render_set_uniform_vec3(/*"uLightPosition"*/ STR(2873), global::render_light_from.Value(X_), global::render_light_from.Value(Y_), global::render_light_from.Value(Z_));
		render_set_uniform_color(/*"uLightColor"*/ STR(2874), global::render_light_color, IntType(1));
		render_set_uniform(/*"uLightStrength"*/ STR(2875), global::render_light_strength);
		render_set_uniform(/*"uLightNear"*/ STR(2876), global::render_light_near);
		render_set_uniform(/*"uLightFar"*/ STR(2877), global::render_light_far);
		render_set_uniform(/*"uLightFadeSize"*/ STR(2878), global::render_light_fade_size);
		render_set_uniform_vec3(/*"uShadowPosition"*/ STR(2879), global::render_shadow_from.Real(X_), global::render_shadow_from.Real(Y_), global::render_shadow_from.Real(Z_));
		render_set_uniform(/*"uLightSpecular"*/ STR(2597), global::render_light_specular_strength);
		render_set_uniform(/*"uLightSize"*/ STR(2880), global::render_light_size);
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer"*/ STR(2847)), surface_get_texture((IntType)(global::render_surface_point_atlas_buffer)));
		gpu_set_texfilter_ext(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer"*/ STR(2847)), false);
		gpu_set_texrepeat_ext(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer"*/ STR(2847)), false);
		render_set_uniform(/*"uDepthBufferSize"*/ STR(2881), global::_app->project_render_shadows_point_buffer_size);
	}
	
	void shader_high_light_point_shadowless_set()
	{
		render_set_uniform_int(/*"uIsSky"*/ STR(2596), IntType(0));
		render_set_uniform_int(/*"uLightAmount"*/ STR(2831), global::render_shadowless_point_amount);
		render_set_uniform(/*"uLightData"*/ STR(2832), global::render_shadowless_point_data);
		render_set_uniform(/*"uEmissive"*/ STR(2590), IntType(0));
		global::render_light_specular_strength = IntType(1);
		render_set_uniform(/*"uLightSpecular"*/ STR(2597), global::render_light_specular_strength);
	}
	
	void shader_high_light_spot_set(ScopeAny self)
	{
		render_set_uniform(/*"uEmissive"*/ STR(2590), IntType(0));
		render_set_uniform_int(/*"uIsSky"*/ STR(2596), IntType(0));
		render_set_uniform_int(/*"uIsWater"*/ STR(2591), IntType(0));
		render_set_uniform(/*"uLightMatrix"*/ STR(2882), global::render_spot_matrix);
		render_set_uniform(/*"uShadowMatrix"*/ STR(2883), global::render_shadow_matrix);
		render_set_uniform_vec3(/*"uLightPosition"*/ STR(2873), global::render_light_from.Value(X_), global::render_light_from.Value(Y_), global::render_light_from.Value(Z_));
		render_set_uniform_color(/*"uLightColor"*/ STR(2874), global::render_light_color, IntType(1));
		render_set_uniform(/*"uLightStrength"*/ STR(2875), global::render_light_strength);
		render_set_uniform(/*"uLightSpecular"*/ STR(2597), global::render_light_specular_strength);
		render_set_uniform(/*"uLightSize"*/ STR(2880), global::render_light_size);
		render_set_uniform(/*"uLightNear"*/ STR(2876), global::render_light_near);
		render_set_uniform(/*"uLightFar"*/ STR(2877), global::render_light_far);
		render_set_uniform(/*"uLightFadeSize"*/ STR(2878), global::render_light_fade_size);
		render_set_uniform(/*"uLightSpotSharpness"*/ STR(2884), global::render_light_spot_sharpness);
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uLightGobo"*/ STR(2885)), sprite_get_texture((IntType)(global::render_gobo_texture), IntType(0)));
		gpu_set_texfilter_ext(DsMap(sInt(sampler_map)).Value(/*"uLightGobo"*/ STR(2885)), true);
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer"*/ STR(2847)), surface_get_texture((IntType)(global::render_surface_spot_buffer)));
		gpu_set_texfilter_ext(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer"*/ STR(2847)), true);
	}
	
	void shader_high_light_sun_set(ScopeAny self)
	{
		render_set_uniform(/*"uEmissive"*/ STR(2590), IntType(0));
		render_set_uniform_int(/*"uIsGround"*/ STR(2593), IntType(0));
		render_set_uniform_int(/*"uIsSky"*/ STR(2596), IntType(0));
		render_set_uniform_int(/*"uIsWater"*/ STR(2591), IntType(0));
		render_set_uniform_mat4_array(/*"uLightMatBiasMVP"*/ STR(2886), ArrType::From({ ObjType(frustum, global::render_cascades.Value(IntType(0)))->matBias, ObjType(frustum, global::render_cascades.Value(IntType(1)))->matBias, ObjType(frustum, global::render_cascades.Value(IntType(2)))->matBias }));
		render_set_uniform(/*"uSunNear"*/ STR(2887), ArrType::From({ ObjType(frustum, global::render_cascades.Value(IntType(0)))->near_, ObjType(frustum, global::render_cascades.Value(IntType(1)))->near_, ObjType(frustum, global::render_cascades.Value(IntType(2)))->near_ }));
		render_set_uniform(/*"uSunFar"*/ STR(2888), ArrType::From({ ObjType(frustum, global::render_cascades.Value(IntType(0)))->far_, ObjType(frustum, global::render_cascades.Value(IntType(1)))->far_, ObjType(frustum, global::render_cascades.Value(IntType(2)))->far_ }));
		render_set_uniform_color(/*"uLightColor"*/ STR(2874), global::render_light_color, IntType(1));
		render_set_uniform(/*"uLightStrength"*/ STR(2875), global::render_light_strength);
		render_set_uniform(/*"uLightSpecular"*/ STR(2597), global::render_light_specular_strength);
		render_set_uniform_vec3(/*"uLightDirection"*/ STR(2889), global::render_sun_direction.Real(X_), global::render_sun_direction.Real(Y_), global::render_sun_direction.Real(Z_));
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer0"*/ STR(2890)), surface_get_texture((IntType)(global::render_surface_sun_buffer.Value(IntType(0)))));
		gpu_set_texfilter_ext(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer0"*/ STR(2890)), true);
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer1"*/ STR(2891)), surface_get_texture((IntType)(global::render_surface_sun_buffer.Value(IntType(1)))));
		gpu_set_texfilter_ext(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer1"*/ STR(2891)), true);
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer2"*/ STR(2892)), surface_get_texture((IntType)(global::render_surface_sun_buffer.Value(IntType(2)))));
		gpu_set_texfilter_ext(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer2"*/ STR(2892)), true);
		render_set_uniform(/*"uCascadeEndClipSpace"*/ STR(2893), ArrType::From({ ObjType(frustum, global::render_cascades.Value(IntType(0)))->clipEndDepth, ObjType(frustum, global::render_cascades.Value(IntType(1)))->clipEndDepth, ObjType(frustum, global::render_cascades.Value(IntType(2)))->clipEndDepth }));
	}
	
	void shader_high_raytrace_resolve_set(ScopeAny self, BoolType indirect)
	{
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer"*/ STR(2847)), surface_get_texture((IntType)(global::render_surface_depth)));
		gpu_set_texrepeat_ext(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer"*/ STR(2847)), false);
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uNormalBuffer"*/ STR(2861)), surface_get_texture((IntType)(global::render_surface_normal)));
		gpu_set_texrepeat_ext(DsMap(sInt(sampler_map)).Value(/*"uNormalBuffer"*/ STR(2861)), false);
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uMaterialBuffer"*/ STR(2869)), surface_get_texture((IntType)(global::render_surface_material)));
		gpu_set_texrepeat_ext(DsMap(sInt(sampler_map)).Value(/*"uMaterialBuffer"*/ STR(2869)), false);
		render_set_uniform(/*"uNormalBufferScale"*/ STR(2845), is_cpp() ? normal_buffer_scale : IntType(1));
		render_set_uniform_vec2(/*"uScreenSize"*/ STR(2814), global::render_width, global::render_height);
		render_set_uniform_int(/*"uIndirect"*/ STR(2894), bool_to_float(indirect));
	}
	
	void shader_high_raytrace_set(ScopeAny self, IntType mode, VarType surf)
	{
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer"*/ STR(2847)), surface_get_texture((IntType)(global::render_surface_depth)));
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uNormalBuffer"*/ STR(2861)), surface_get_texture((IntType)(global::render_surface_normal)));
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uNoiseBuffer"*/ STR(2862)), surface_get_texture(global::render_sample_noise_texture));
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uMaterialBuffer"*/ STR(2869)), surface_get_texture((IntType)(global::render_surface_material)));
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uDiffuseBuffer"*/ STR(2895)), surface_get_texture((IntType)(global::render_surface_diffuse)));
		gpu_set_texrepeat_ext(DsMap(sInt(sampler_map)).Value(/*"uNoiseBuffer"*/ STR(2862)), true);
		render_set_uniform_int(/*"uRayType"*/ STR(2896), mode);
		render_set_uniform(/*"uNormalBufferScale"*/ STR(2845), is_cpp() ? normal_buffer_scale : IntType(1));
		if (mode == e_raytrace_INDIRECT)
		{
			render_set_uniform(/*"uPrecision"*/ STR(2897), global::_app->project_render_indirect_precision);
			render_set_uniform(/*"uThickness"*/ STR(2898), 0.001);
			render_set_uniform(/*"uRayDistance"*/ STR(2899), IntType(5000));
			texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uMaterialBuffer"*/ STR(2869)), surface_get_texture((IntType)(global::render_surface_emissive)));
			texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uDataBuffer"*/ STR(2900)), surface_get_texture((IntType)(global::render_surface_shadows)));
		}
		if (mode == e_raytrace_REFLECTIONS)
		{
			render_set_uniform(/*"uPrecision"*/ STR(2897), global::_app->project_render_reflections_precision);
			render_set_uniform(/*"uThickness"*/ STR(2898), global::_app->project_render_reflections_thickness);
			render_set_uniform(/*"uRayDistance"*/ STR(2899), IntType(5000));
			texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uDataBuffer"*/ STR(2900)), surface_get_texture((IntType)(surf)));
		}
		render_set_uniform(/*"uNoiseSize"*/ STR(2863), global::render_sample_noise_size);
		render_set_uniform(/*"uNear"*/ STR(2839), global::depth_near);
		render_set_uniform(/*"uFar"*/ STR(2840), global::depth_far);
		render_set_uniform(/*"uProjMatrix"*/ STR(2901), global::proj_matrix);
		render_set_uniform(/*"uProjMatrixInv"*/ STR(2902), matrix_inverse(global::proj_matrix));
		render_set_uniform_vec2(/*"uScreenSize"*/ STR(2814), global::render_width, global::render_height);
		render_set_uniform(/*"uViewMatrixInv"*/ STR(2903), matrix_inverse(global::view_matrix));
		render_set_uniform_color(/*"uSkyColor"*/ STR(2904), global::_app->background_sky_color_final, IntType(1));
		render_set_uniform_color(/*"uFogColor"*/ STR(1971), global::_app->background_fog_color_final, IntType(1));
		render_set_uniform(/*"uFadeAmount"*/ STR(2905), global::_app->project_render_reflections_fade_amount);
		render_set_uniform(/*"uGamma"*/ STR(2837), global::render_gamma);
		render_set_uniform(/*"uIndirectStength"*/ STR(2906), global::_app->project_render_indirect_strength);
	}
	
	void shader_high_samples_add_set(ScopeAny self, VarType exponent, VarType decimal, VarType alpha, VarType sample)
	{
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uSamplesExp"*/ STR(2907)), surface_get_texture((IntType)(exponent)));
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uSamplesDec"*/ STR(2908)), surface_get_texture((IntType)(decimal)));
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uSamplesAlpha"*/ STR(2909)), surface_get_texture((IntType)(alpha)));
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uSample"*/ STR(2910)), surface_get_texture((IntType)(sample)));
	}
	
	void shader_high_samples_unpack_set(ScopeAny self)
	{
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uSamplesExp"*/ STR(2907)), surface_get_texture((IntType)(global::render_surface_sample_expo)));
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uSamplesDec"*/ STR(2908)), surface_get_texture((IntType)(global::render_surface_sample_dec)));
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uSamplesAlpha"*/ STR(2909)), surface_get_texture((IntType)(global::render_surface_sample_alpha)));
		render_set_uniform(/*"uSamplesStrength"*/ STR(2911), 255.0 / global::render_samples);
		render_set_uniform_int(/*"uRenderBackground"*/ STR(2912), global::render_background);
	}
	
	void shader_high_ssao_set(ScopeAny self, VarType mask)
	{
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer"*/ STR(2847)), surface_get_texture((IntType)(global::render_surface_depth)));
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uNormalBuffer"*/ STR(2861)), surface_get_texture((IntType)(global::render_surface_normal)));
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uEmissiveBuffer"*/ STR(2913)), surface_get_texture((IntType)(global::render_surface_emissive)));
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uNoiseBuffer"*/ STR(2862)), surface_get_texture(global::render_sample_noise_texture));
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uMaskBuffer"*/ STR(2914)), surface_get_texture((IntType)(mask)));
		gpu_set_texrepeat_ext(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer"*/ STR(2847)), false);
		gpu_set_texrepeat_ext(DsMap(sInt(sampler_map)).Value(/*"uNormalBuffer"*/ STR(2861)), false);
		gpu_set_texrepeat_ext(DsMap(sInt(sampler_map)).Value(/*"uEmissiveBuffer"*/ STR(2913)), false);
		gpu_set_texrepeat_ext(DsMap(sInt(sampler_map)).Value(/*"uNoiseBuffer"*/ STR(2862)), true);
		gpu_set_texrepeat_ext(DsMap(sInt(sampler_map)).Value(/*"uMaskBuffer"*/ STR(2914)), true);
		render_set_uniform(/*"uNormalBufferScale"*/ STR(2845), is_cpp() ? normal_buffer_scale : IntType(1));
		render_set_uniform(/*"uNear"*/ STR(2839), global::depth_near);
		render_set_uniform(/*"uFar"*/ STR(2840), global::depth_far);
		render_set_uniform(/*"uProjMatrix"*/ STR(2901), global::proj_matrix);
		render_set_uniform(/*"uProjMatrixInv"*/ STR(2902), matrix_inverse(global::proj_matrix));
		render_set_uniform_vec2(/*"uScreenSize"*/ STR(2814), global::render_width, global::render_height);
		render_set_uniform(/*"uNoiseSize"*/ STR(2863), global::render_sample_noise_size);
		render_set_uniform(/*"uKernel"*/ STR(2815), global::render_ssao_kernel);
		render_set_uniform(/*"uRadius"*/ STR(2817), global::_app->project_render_ssao_radius);
		render_set_uniform(/*"uPower"*/ STR(2813), global::_app->project_render_ssao_power);
		render_set_uniform_color(/*"uColor"*/ STR(2820), global::_app->project_render_ssao_color, IntType(1));
	}
	
	void shader_high_subsurface_scatter_set(ScopeAny self, VarType ssssurf, VarType rangesurf)
	{
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uSSSBuffer"*/ STR(2915)), surface_get_texture((IntType)(ssssurf)));
		gpu_set_texfilter_ext(DsMap(sInt(sampler_map)).Value(/*"uSSSBuffer"*/ STR(2915)), false);
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uSSSRangeBuffer"*/ STR(2916)), surface_get_texture((IntType)(rangesurf)));
		gpu_set_texfilter_ext(DsMap(sInt(sampler_map)).Value(/*"uSSSRangeBuffer"*/ STR(2916)), false);
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer"*/ STR(2847)), surface_get_texture((IntType)(global::render_surface_depth)));
		gpu_set_texfilter_ext(DsMap(sInt(sampler_map)).Value(/*"uDepthBuffer"*/ STR(2847)), false);
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uDirect"*/ STR(2917)), surface_get_texture((IntType)(global::render_surface_shadows)));
		gpu_set_texfilter_ext(DsMap(sInt(sampler_map)).Value(/*"uDirect"*/ STR(2917)), false);
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uNoiseBuffer"*/ STR(2862)), surface_get_texture(global::render_sample_noise_texture));
		gpu_set_texfilter_ext(DsMap(sInt(sampler_map)).Value(/*"uNoiseBuffer"*/ STR(2862)), false);
		render_set_uniform(/*"uNoiseSize"*/ STR(2863), global::render_sample_noise_size);
		render_set_uniform(/*"uProjMatrix"*/ STR(2901), global::proj_matrix);
		render_set_uniform(/*"uProjMatrixInv"*/ STR(2902), matrix_inverse(global::proj_matrix));
		render_set_uniform_vec2(/*"uScreenSize"*/ STR(2814), global::render_width, global::render_height);
		render_set_uniform(/*"uNear"*/ STR(2839), global::depth_near);
		render_set_uniform(/*"uFar"*/ STR(2840), global::depth_far);
		render_set_uniform_int(/*"uSamples"*/ STR(2816), global::render_subsurface_size);
		render_set_uniform(/*"uKernel"*/ STR(2815), global::render_subsurface_kernel);
	}
	
}
